{% extends 'backoffice/base.html.twig' %}

{% block title %}Cliniques{% endblock %}
{% block page_title %}üè• Cliniques{% endblock %}

{% block body %}
<div style="margin-bottom: 20px;">
    <a href="{{ path('backoffice_clinics_new') }}" style="display: inline-block; padding: 10px 20px; background: #27ae60; color: white; text-decoration: none; border-radius: 4px; font-weight: 500;">
        ‚ûï Cr√©er une clinique
    </a>
    <a href="{{ path('backoffice_clinic_groups') }}" style="display: inline-block; padding: 10px 20px; background: white; color: #2c3e50; text-decoration: none; border-radius: 4px; border: 1px solid #bdc3c7; font-weight: 500; margin-left: 10px;">
        G√©rer les groupes
    </a>
</div>
<div class="card">
    <h3>Filtrer</h3>
    <form method="get" action="{{ path('backoffice_clinics') }}" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
        <div>
            <label style="display: block; margin-bottom: 5px; font-size: 0.875rem; color: #7f8c8d;">Statut</label>
            <select name="status" style="width: 100%; padding: 8px; border: 1px solid #bdc3c7; border-radius: 4px;">
                <option value="">(tous)</option>
                <option value="active" {{ filters.status == 'active' ? 'selected' : '' }}>Active</option>
                <option value="suspended" {{ filters.status == 'suspended' ? 'selected' : '' }}>Suspended</option>
                <option value="closed" {{ filters.status == 'closed' ? 'selected' : '' }}>Closed</option>
            </select>
        </div>
        <div>
            <label style="display: block; margin-bottom: 5px; font-size: 0.875rem; color: #7f8c8d;">Groupe</label>
            <select name="group_id" style="width: 100%; padding: 8px; border: 1px solid #bdc3c7; border-radius: 4px;">
                <option value="">(tous)</option>
                {% for group in groups.clinicGroups %}
                    <option value="{{ group.id }}" {{ filters.group_id == group.id ? 'selected' : '' }}>{{ group.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div style="grid-column: span 2;">
            <label style="display: block; margin-bottom: 5px; font-size: 0.875rem; color: #7f8c8d;">Recherche (nom ou slug)</label>
            <input name="search" style="width: 100%; padding: 8px; border: 1px solid #bdc3c7; border-radius: 4px;" value="{{ filters.search }}">
        </div>
        <div style="display: flex; align-items: end;">
            <button type="submit" style="padding: 8px 20px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: 500;">Rechercher</button>
        </div>
    </form>
</div>

<div class="card">
    <h3>R√©sultats ({{ collection.total }})</h3>
    <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #ecf0f1;">
                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #bdc3c7;">ID</th>
                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #bdc3c7;">Nom</th>
                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #bdc3c7;">Slug</th>
                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #bdc3c7;">Timezone</th>
                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #bdc3c7;">Locale</th>
                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #bdc3c7;">Statut</th>
                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #bdc3c7;">Groupe</th>
                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #bdc3c7;">Actions</th>
                </tr>
            </thead>
            <tbody>
            {% for clinic in collection.clinics %}
                <tr style="border-bottom: 1px solid #ecf0f1;">
                    <td style="padding: 12px;"><small><code>{{ clinic.id|slice(0, 8) }}</code></small></td>
                    <td style="padding: 12px;">{{ clinic.name }}</td>
                    <td style="padding: 12px;"><code>{{ clinic.slug }}</code></td>
                    <td style="padding: 12px;">{{ clinic.timeZone }}</td>
                    <td style="padding: 12px;">{{ clinic.locale }}</td>
                    <td style="padding: 12px;">
                        <span style="padding: 4px 8px; border-radius: 4px; font-size: 0.875rem; font-weight: 500; background: {{ clinic.status.value == 'active' ? '#27ae60' : (clinic.status.value == 'suspended' ? '#f39c12' : '#e74c3c') }}; color: white;">
                            {{ clinic.status.value }}
                        </span>
                    </td>
                    <td style="padding: 12px;">
                        {% if clinic.clinicGroupId %}
                            <small><code>{{ clinic.clinicGroupId|slice(0, 8) }}</code></small>
                        {% else %}
                            ‚Äî
                        {% endif %}
                    </td>
                    <td style="padding: 12px;">
                        <a href="{{ path('backoffice_clinics_edit', {id: clinic.id}) }}" style="padding: 6px 12px; background: #3498db; color: white; text-decoration: none; border-radius: 4px; font-size: 0.875rem;">√âditer</a>
                    </td>
                </tr>
            {% else %}
                <tr><td colspan="8" style="padding: 20px; text-align: center; color: #95a5a6;">Aucun r√©sultat</td></tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
