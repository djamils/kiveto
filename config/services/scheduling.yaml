# Scheduling Bounded Context Services Configuration

services:
  _defaults:
    autowire: true
    autoconfigure: true

  # Domain repositories
  App\Scheduling\Domain\Repository\AppointmentRepositoryInterface:
    class: App\Scheduling\Infrastructure\Persistence\Doctrine\Repository\DoctrineAppointmentRepository

  App\Scheduling\Domain\Repository\WaitingRoomEntryRepositoryInterface:
    class: App\Scheduling\Infrastructure\Persistence\Doctrine\Repository\DoctrineWaitingRoomEntryRepository

  # Application ports (read repositories)
  App\Scheduling\Application\Port\WaitingRoomReadRepositoryInterface:
    class: App\Scheduling\Infrastructure\Persistence\Doctrine\Repository\DoctrineWaitingRoomReadRepository

  # Application ports (anti-corruption adapters)
  App\Scheduling\Application\Port\MembershipEligibilityCheckerInterface:
    class: App\Scheduling\Infrastructure\Adapter\AccessControl\DbalMembershipEligibilityChecker

  App\Scheduling\Application\Port\AppointmentConflictCheckerInterface:
    class: App\Scheduling\Infrastructure\Adapter\DbalAppointmentConflictChecker

  App\Scheduling\Application\Port\OwnerExistenceCheckerInterface:
    class: App\Scheduling\Infrastructure\Adapter\Client\DbalOwnerExistenceChecker

  App\Scheduling\Application\Port\AnimalExistenceCheckerInterface:
    class: App\Scheduling\Infrastructure\Adapter\Animal\DbalAnimalExistenceChecker

  # Mappers
  App\Scheduling\Infrastructure\Persistence\Doctrine\Mapper\AppointmentMapper: ~
  App\Scheduling\Infrastructure\Persistence\Doctrine\Mapper\WaitingRoomEntryMapper: ~

  # Command handlers (auto-registered via AsMessageHandler attribute)
  App\Scheduling\Application\Command\:
    resource: '../src/Scheduling/Application/Command/**/Handler.php'

  # Query handlers (auto-registered via AsMessageHandler attribute)
  App\Scheduling\Application\Query\:
    resource: '../src/Scheduling/Application/Query/**/Handler.php'
